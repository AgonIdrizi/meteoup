{"version":3,"sources":["containers/SideMenu/SearchAndFavourite/SearchAndFavourite.module.scss","containers/SideMenu/SearchAndFavourite/SearchAndFavourite.js","containers/SideMenu/SearchAndFavourite/index.js"],"names":["module","exports","SearchAndFavourite","props","_useFavourite","useFavourite","_useFavourite2","Object","slicedToArray","favData","setFavData","loginRegisterContext","removeFromFavouritesHandler","key","database","ref","child","remove","newFavData","filter","elem","favId","data","searchQuery","length","lastVisited","search","react_default","a","createElement","className","classes","SearchLocations","onSelectLocation","addToFavouritesHandler","e","place","longitude","latitude","preventDefault","user","favouritePlace","locationName","uid","orderByChild","equalTo","once","snapshot","hasChildren","push","catch","err","console","log","loggedIn","deleteLastVisited","Favourites","loginHandler","isLoading","logoutHandler","signUpHandler","loginRegisterErrorMessage","clearErrorMessageHandler","__webpack_exports__","LoginRegisterContext","Consumer","_ref","FavouritesContext","_ref2","SideMenu_SearchAndFavourite_SearchAndFavourite","assign","defineProperty"],"mappings":"8EACAA,EAAAC,QAAA,CAAkBC,mBAAA,mLC+EHA,EAzEY,SAAAC,GAAS,IAAAC,EACkBC,cADlBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAC3BK,EAD2BH,EAAA,GAClBI,EADkBJ,EAAA,GACNK,EADML,EAAA,GA6B5BM,EAA8B,SAAAC,GAClCC,IACGC,IAAI,eACJC,MAAM,IAAMH,GACZI,SACH,IAAMC,EAAaT,EAAQU,OAAO,SAAAC,GAAI,OAAIA,EAAKC,QAAUR,IACzDH,EAAWQ,IAGPI,EACyB,IAA7BnB,EAAMoB,YAAYC,OAAerB,EAAMsB,YAActB,EAAMoB,YACvDG,EAAsC,IAA7BvB,EAAMoB,YAAYC,OAAe,QAAU,OAC1D,OACEG,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAQ7B,oBACtByB,EAAAC,EAAAC,cAACG,EAAA,EAAD,CACEV,KAAMA,EACNb,QAASA,EACTiB,OAAQA,EACRO,iBAAkB9B,EAAM8B,iBACxBC,uBA7CyB,SAACC,EAAGC,EAAOC,EAAWC,GAGnD,GAFAH,EAAEI,iBAE+B,MAA7B5B,EAAqB6B,KAAc,CACrC,IAAMC,EAAiB,CACrBC,aAAcN,EACdC,UAAWA,EACXC,SAAUA,EACVK,IAAKxC,EAAMqC,KAAKG,KAGI7B,IACnBC,IAAI,cACJ6B,aAAa,gBACbC,QAAQT,GACGU,KAAK,QAAS,SAAAC,GACtBA,EAASC,eAIXD,EAAShC,IAAIkC,KAAKR,GAAgBS,MAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,SA0B7DvC,4BAA6BA,EAC7B4B,KAAM7B,EAAqB6B,KAC3Bc,SAAU3C,EAAqB2C,SAC/BC,kBAAmBpD,EAAMoD,oBAE3B5B,EAAAC,EAAAC,cAAC2B,EAAA,EAAD,CACEhB,KAAMrC,EAAMqC,KACZ/B,QAASA,EACTwB,iBAAkB9B,EAAM8B,iBACxBrB,4BAA6BA,EAC7B0C,SAAU3C,EAAqB2C,SAC/BG,aAAc9C,EAAqB8C,aACnCC,UAAWvD,EAAMuD,UACjBC,cAAehD,EAAqBgD,cACpCC,cAAejD,EAAqBiD,cACpCC,0BACElD,EAAqBkD,0BAEvBC,yBAA0BnD,EAAqBmD,8CCrExCC,EAAA,iBAAA5D,GAAK,OAClBwB,EAAAC,EAAAC,cAACmC,EAAA,EAAqBC,SAAtB,KACG,SAAAC,GAAA,IACC1B,EADD0B,EACC1B,KACAc,EAFDY,EAECZ,SACAG,EAHDS,EAGCT,aACAC,EAJDQ,EAICR,UACAC,EALDO,EAKCP,cACAC,EANDM,EAMCN,cACAC,EAPDK,EAOCL,0BACAC,EARDI,EAQCJ,yBARD,OAUCnC,EAAAC,EAAAC,cAACsC,EAAA,EAAkBF,SAAnB,KACG,SAAAG,GAAA,IAAG3D,EAAH2D,EAAG3D,QAAH,OACCkB,EAAAC,EAAAC,cAACwC,EAAD9D,OAAA+D,OAAA,GACMnE,EADNI,OAAAgE,EAAA,EAAAhE,CAAA,CAEEE,QAASA,EACT+B,KAAMA,EACNc,SAAUA,EACVG,aAAcA,EACdC,UAAWA,EACXC,cAAeA,EACfC,cAAeA,EACfC,0BAA2BA,EAC3BC,yBAA0BA,GAV5B,YAWaJ","file":"static/js/11.25b6423d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchAndFavourite\":\"SearchAndFavourite_SearchAndFavourite__1Q0jb\"};","import React from \"react\";\nimport SearchLocations from \"../../../components/SearchLocations/SearchLocations\";\nimport Favourites from \"../../../components/Favourites/Favourites\";\nimport { database } from \"../../../config/fire\";\nimport useFavourite from \"../../../customHooks/useFavourites\";\nimport classes from \"./SearchAndFavourite.module.scss\";\n\nconst SearchAndFavourite = props => {\n  const [favData, setFavData, loginRegisterContext] = useFavourite();\n\n  const addToFavouritesHandler = (e, place, longitude, latitude) => {\n    e.preventDefault();\n\n    if (loginRegisterContext.user != null) {\n      const favouritePlace = {\n        locationName: place,\n        longitude: longitude,\n        latitude: latitude,\n        uid: props.user.uid\n      };\n\n      const refAfavourite = database\n        .ref(\"favourites\")\n        .orderByChild(\"locationName\")\n        .equalTo(place);\n      refAfavourite.once(\"value\", snapshot => {\n        if (snapshot.hasChildren()) {\n          //do nothing\n        } else {\n          //push data to firebase\n          snapshot.ref.push(favouritePlace).catch(err => console.log(err));\n        }\n      });\n    }\n  };\n\n  const removeFromFavouritesHandler = key => {\n    database\n      .ref(\"/favourites\")\n      .child(\"/\" + key)\n      .remove();\n    const newFavData = favData.filter(elem => elem.favId !== key);\n    setFavData(newFavData);\n  };\n\n  const data =\n    props.searchQuery.length === 0 ? props.lastVisited : props.searchQuery;\n  const search = props.searchQuery.length === 0 ? \"false\" : \"true\";\n  return (\n    <div className={classes.SearchAndFavourite}>\n      <SearchLocations\n        data={data}\n        favData={favData}\n        search={search}\n        onSelectLocation={props.onSelectLocation}\n        addToFavouritesHandler={addToFavouritesHandler}\n        removeFromFavouritesHandler={removeFromFavouritesHandler}\n        user={loginRegisterContext.user}\n        loggedIn={loginRegisterContext.loggedIn}\n        deleteLastVisited={props.deleteLastVisited}\n      />\n      <Favourites\n        user={props.user}\n        favData={favData}\n        onSelectLocation={props.onSelectLocation}\n        removeFromFavouritesHandler={removeFromFavouritesHandler}\n        loggedIn={loginRegisterContext.loggedIn}\n        loginHandler={loginRegisterContext.loginHandler}\n        isLoading={props.isLoading}\n        logoutHandler={loginRegisterContext.logoutHandler}\n        signUpHandler={loginRegisterContext.signUpHandler}\n        loginRegisterErrorMessage={\n          loginRegisterContext.loginRegisterErrorMessage\n        }\n        clearErrorMessageHandler={loginRegisterContext.clearErrorMessageHandler}\n      />\n    </div>\n  );\n};\n\nexport default SearchAndFavourite;\n","import React from \"react\";\nimport SearchAndFavourite from \"./SearchAndFavourite\";\nimport { LoginRegisterContext } from \"../../../contexts/LoginRegisterContext\";\nimport { FavouritesContext } from \"../../../contexts/FavouritesContext\";\n\nexport default props => (\n  <LoginRegisterContext.Consumer>\n    {({\n      user,\n      loggedIn,\n      loginHandler,\n      isLoading,\n      logoutHandler,\n      signUpHandler,\n      loginRegisterErrorMessage,\n      clearErrorMessageHandler\n    }) => (\n      <FavouritesContext.Consumer>\n        {({ favData }) => (\n          <SearchAndFavourite\n            {...props}\n            favData={favData}\n            user={user}\n            loggedIn={loggedIn}\n            loginHandler={loginHandler}\n            isLoading={isLoading}\n            logoutHandler={logoutHandler}\n            signUpHandler={signUpHandler}\n            loginRegisterErrorMessage={loginRegisterErrorMessage}\n            clearErrorMessageHandler={clearErrorMessageHandler}\n            isLoading={isLoading}\n          />\n        )}\n      </FavouritesContext.Consumer>\n    )}\n  </LoginRegisterContext.Consumer>\n);\n"],"sourceRoot":""}