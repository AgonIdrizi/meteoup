(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{316:function(e,a,t){"use strict";var n=t(41),r=t(0),o=t.n(r),i=t(39),l=t(37),c=t(46),u=t(318),s=t.n(u);a.a=Object(i.f)(function(e){var a,t=Object(r.useState)({color:"blue"}),i=Object(n.a)(t,2),u=i[0],d=i[1],g=function(a){e.removeFromFavouritesHandler(e.id),d({color:"blue"})},f="blue"===u.color?function(a){return function(a){e.addToFavouritesHandler(a,e.place,e.longitude,e.latitude),d({color:"yellow"})}(a)}:function(e){return g()},v=e.loggedIn&&e.isFavourite?o.a.createElement("a",{href:"#",onClick:function(e){return g()}},o.a.createElement("span",null,o.a.createElement(l.a,{style:{color:"yellow"},icon:c.d}))):e.loggedIn?o.a.createElement("a",{href:"#",onClick:f},o.a.createElement("span",null,o.a.createElement(l.a,{style:{color:"blue"},icon:c.d}))):null;return o.a.createElement("div",{className:s.a.Location},o.a.createElement("div",{className:s.a.LocationImageInfo,onMouseOver:function(a){return e.onSelectLocation(e.longitude,e.latitude,e.place,a,e.history)},onClick:function(a){return e.onSelectLocation(e.longitude,e.latitude,e.place,a,e.history)}},o.a.createElement("img",{src:"https://www.meteoblue.com/website/images/flags/mk.svg",style:{height:"15px",width:"15px"}}),o.a.createElement("p",null,(a=e.place).length>32?a.substring(0,32).concat("..."):a),o.a.createElement("span",null," ",e.longitude.toFixed(2)," N ",e.latitude.toFixed(2)," E")),o.a.createElement("div",null,v))})},317:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(316),i=t(319),l=t.n(i);a.a=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:l.a.searchLocations},r.a.createElement("div",{className:l.a.VisitedLocations},r.a.createElement("h4",null,"true"===e.search?"Search":"Last Visited"),r.a.createElement("a",{href:"#",src:"",onClick:function(a){return e.deleteLastVisited(a)}},"true"===e.search?"":"Delete")),e.data.map(function(a){return r.a.createElement(o.a,Object.assign({key:a.id,place:a.place,matchingText:a.matchingText,user:e.user,loggedIn:e.loggedIn,longitude:a.longitude,latitude:a.latitude,onSelectLocation:e.onSelectLocation,addToFavouritesHandler:e.addToFavouritesHandler,removeFromFavouritesHandler:e.removeFromFavouritesHandler},function(a){var t=e.favData.find(function(e){return e.locationName===a});return{isFavourite:void 0!==t,id:t?t.favId:null}}(a.place)))})))}},318:function(e,a,t){e.exports={Location:"Location_Location__2a6k3",LocationImageInfo:"Location_LocationImageInfo__1IVr_"}},319:function(e,a,t){e.exports={searchLocations:"SearchLocations_searchLocations__-Yim8",VisitedLocations:"SearchLocations_VisitedLocations__Ajs_J"}},320:function(e,a,t){"use strict";var n=t(41),r=t(0),o=t.n(r),i=t(316),l=t(126),c=t(81),u=t(321),s=t.n(u);a.a=function(e){var a=Object(r.useState)(!1),t=Object(n.a)(a,2),u=t[0],d=t[1];Object(r.useEffect)(function(){return function(){return d(!1)}},e.loggedIn);var g=e.loggedIn?null:o.a.createElement(c.a,{className:s.a.Button,onClick:function(){return d(!0)},type:"primary",ghost:!0},"Login/SignUp"),f=e.loggedIn?null:o.a.createElement("p",null,"Sign up to save favourites");return!e.loggedIn&&u&&(g=o.a.createElement(l.a,{loggedIn:e.loggedIn,user:e.user,loginHandler:e.loginHandler,logoutHandler:e.logoutHandler,signUpHandler:e.signUpHandler,loginRegisterErrorMessage:e.loginRegisterErrorMessage,clearErrorMessageHandler:e.clearErrorMessageHandler,isLoading:e.isLoading,isMobile:e.isMobile,isOpen:u}),f=null),o.a.createElement("div",{className:s.a.favourites},o.a.createElement("h4",null,"Favourites"),f,o.a.createElement("div",{className:s.a.FavouriteLocations},e.favData.map(function(a){return o.a.createElement(i.a,{key:a.favId,id:a.favId,place:a.locationName,isFavourite:!0,user:e.user,loggedIn:e.loggedIn,longitude:a.longitude,latitude:a.latitude,onSelectLocation:e.onSelectLocation,removeFromFavouritesHandler:e.removeFromFavouritesHandler})})),g)}},321:function(e,a,t){e.exports={favourites:"Favourites_favourites__23lH1",FavouriteLocations:"Favourites_FavouriteLocations__2En8c"}},322:function(e,a,t){"use strict";var n=t(10),r=t(41),o=t(0),i=t(55),l=t(50);a.a=function(){var e=Object(o.useState)([]),a=Object(r.a)(e,2),t=a[0],c=a[1],u=Object(o.useContext)(i.a);return Object(o.useEffect)(function(){return u.user&&void 0!=u.user.email&&l.a.ref("favourites").orderByChild("uid").equalTo(u.user.uid).on("value",function(e){if(e.exists()){var a=e.val(),t=Object.keys(a).map(function(e){return Object(n.a)({favId:e},a[e])});c(t)}}),function(){u.user&&void 0!=u.user.email&&l.a.ref("favourites").orderByChild("uid").equalTo(u.user.uid).off()}},[u.user,u.loggedIn]),[t,c,u]}},339:function(e,a,t){e.exports={SearchAndFavourite:"SearchAndFavourite_SearchAndFavourite__1Q0jb"}},348:function(e,a,t){"use strict";t.r(a);var n=t(124),r=t(0),o=t.n(r),i=t(41),l=t(317),c=t(320),u=t(50),s=t(322),d=t(339),g=t.n(d),f=function(e){var a=Object(s.a)(),t=Object(i.a)(a,3),n=t[0],r=t[1],d=t[2],f=function(e){u.a.ref("/favourites").child("/"+e).remove();var a=n.filter(function(a){return a.favId!==e});r(a)},v=0===e.searchQuery.length?e.lastVisited:e.searchQuery,m=0===e.searchQuery.length?"false":"true";return o.a.createElement("div",{className:g.a.SearchAndFavourite},o.a.createElement(l.a,{data:v,favData:n,search:m,onSelectLocation:e.onSelectLocation,addToFavouritesHandler:function(a,t,n,r){if(a.preventDefault(),null!=d.user){var o={locationName:t,longitude:n,latitude:r,uid:e.user.uid};u.a.ref("favourites").orderByChild("locationName").equalTo(t).once("value",function(e){e.hasChildren()||e.ref.push(o).catch(function(e){return console.log(e)})})}},removeFromFavouritesHandler:f,user:d.user,loggedIn:d.loggedIn,deleteLastVisited:e.deleteLastVisited}),o.a.createElement(c.a,{user:e.user,favData:n,onSelectLocation:e.onSelectLocation,removeFromFavouritesHandler:f,loggedIn:d.loggedIn,loginHandler:d.loginHandler,isLoading:e.isLoading,logoutHandler:d.logoutHandler,signUpHandler:d.signUpHandler,loginRegisterErrorMessage:d.loginRegisterErrorMessage,clearErrorMessageHandler:d.clearErrorMessageHandler}))},v=t(55),m=t(155);a.default=function(e){return o.a.createElement(v.a.Consumer,null,function(a){var t=a.user,r=a.loggedIn,i=a.loginHandler,l=a.isLoading,c=a.logoutHandler,u=a.signUpHandler,s=a.loginRegisterErrorMessage,d=a.clearErrorMessageHandler;return o.a.createElement(m.a.Consumer,null,function(a){var g=a.favData;return o.a.createElement(f,Object.assign({},e,Object(n.a)({favData:g,user:t,loggedIn:r,loginHandler:i,isLoading:l,logoutHandler:c,signUpHandler:u,loginRegisterErrorMessage:s,clearErrorMessageHandler:d},"isLoading",l)))})})}}}]);
//# sourceMappingURL=6.98c62945.chunk.js.map